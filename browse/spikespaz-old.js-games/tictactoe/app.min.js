"use strict";var table=document.getElementById("grid"),turn=document.getElementById("turn").lastChild,time=document.getElementById("time").lastChild,next="x",grid=[],seconds=0,row,cell,full;for(row=0;row<table.rows.length;row++)for(cell=0;cell<table.rows[row].cells.length;cell++)grid.push(table.rows[row].cells[cell]);function getTime(){return Math.floor(seconds/60)+"m "+seconds%60+"s"}function updateNext(){next="x"==next?"o":"x",turn.innerText=next.toUpperCase()}function checkWin(){for(cell=0;3>cell;cell++)if(grid[3*cell].innerText===grid[3*cell+1].innerText&&grid[3*cell+1].innerText===grid[3*cell+2].innerText&&grid[3*cell].innerText||grid[cell].innerText===grid[cell+3].innerText&&grid[cell+3].innerText===grid[cell+6].innerText&&grid[cell].innerText)return 1;if(grid[0].innerText===grid[4].innerText&&grid[4].innerText===grid[8].innerText&&grid[0].innerText||grid[2].innerText===grid[4].innerText&&grid[4].innerText===grid[6].innerText&&grid[2].innerText)return 1;for(cell in full=0,grid)grid[cell].innerText&&full++;return 9===full?2:0}function updateCell(a){if(!a.innerText)switch(a.innerText=next,a.classList.add("filled"),checkWin()){case 2:setTimeout(function(){alert("Nobody wins!\nTime: "+getTime()),location.reload()},200);break;case 1:setTimeout(function(){alert("Winner: "+next.toUpperCase()+"\nTime: "+getTime()),location.reload()},200);break;case 0:updateNext();}}setInterval(function(){seconds++,time.innerText=getTime()},1e3);
