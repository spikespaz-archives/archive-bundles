"use strict";var initial_screen=document.getElementById("initial"),initial_form=initial_screen.getElementsByTagName("input"),game_screen=document.getElementById("game"),time=document.getElementById("time").lastChild,scaffold=document.getElementById("scaffold").getContext("2d"),result=document.getElementById("result"),guessed=document.getElementById("guessed"),guessed_wrapper=document.getElementById("guessed-wrapper"),message=document.getElementById("message"),active=!1,seconds=0,correct=[],hung=[],match,body_parts=["head","body","left_arm","right_arm","left_leg","right_leg"];scaffold.lineWidth=2,scaffold.lineCap="round",scaffold.translate(0.5,0.5),scaffold.moveTo(30,470),scaffold.lineTo(370,470),scaffold.moveTo(120,470),scaffold.lineTo(120,30),scaffold.lineTo(250,30),scaffold.lineTo(250,90),scaffold.moveTo(185,30),scaffold.lineTo(120,100),scaffold.stroke();function drawPart(a){"head"===a?(scaffold.moveTo(280,120),scaffold.arc(250,120,30,0,2*Math.PI,!0)):"body"===a?(scaffold.moveTo(250,150),scaffold.lineTo(250,290)):"left_arm"===a?(scaffold.moveTo(250,190),scaffold.lineTo(300,160)):"right_arm"===a?(scaffold.moveTo(250,190),scaffold.lineTo(200,160)):"left_leg"===a?(scaffold.moveTo(250,290),scaffold.lineTo(300,320)):"right_leg"===a?(scaffold.moveTo(250,290),scaffold.lineTo(200,320)):void 0;scaffold.stroke()}function getTime(){return Math.floor(seconds/60)+"m "+seconds%60+"s"}initial_form[1].onclick=function(){initial_form[0].value.split("").some(isLetter)&&(active=!0,match=initial_form[0].value,initial_screen.style.display="none",game_screen.style.display="block",updateResult(),setInterval(function(){seconds++,time.innerText=getTime()},1e3))};function alphabetize(a){return a.split("").sort().join("")}function inArray(a,b){return-1<a.indexOf(b)}function updateResult(){var a="",b;for(b in match)a+=inArray(correct.map(function(c){return c.toLowerCase()}),match[b].toLowerCase())?match[b]:isLetter(match[b])?"_":match[b];result.innerText=a}function isLetter(a){return 65<=a.charCodeAt(0)&&90>=a.charCodeAt(0)||97<=a.charCodeAt(0)&&122>=a.charCodeAt(0)}document.onkeypress=function(a){active&&isLetter(a.key)&&!inArray(correct,a.key.toLowerCase())&&!inArray(guessed.innerText,a.key.toUpperCase())?(message.innerHTML="Last guess: <code>"+a.key.toUpperCase()+"</code>",inArray(match.toLowerCase(),a.key.toLowerCase())?(correct.push(a.key),updateResult(),result.innerText===match&&(active=!1,setTimeout(function(){alert("You win!\nTime: "+getTime()),location.reload()},1e3))):(hung.push(body_parts[0]),guessed_wrapper.style.display="block",guessed.innerText=alphabetize(guessed.innerText+a.key.toUpperCase()),drawPart(body_parts[0]),6===hung.length&&(active=!1,result.innerText=match,setTimeout(function(){alert("You got hung!\nThe message was:\n\""+match+"\""),location.reload()},1e3)),body_parts.splice(0,1))):13===a.keyCode&&initial_form[1].click()};